# Matriz de Rastreabilidade

## Testes Funcionais

## Testes de API

| **ID do Caso de Teste** | **Descrição**                                                                                  | **Rota**               | **Método HTTP** | **Critérios de Aceitação**                                                                                                                                                    | **Status** |
|-------------------------|----------------------------------------------------------------------------------------------|------------------------|-----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------|
| CF1.1                   | Verificar a criação de usuário com sucesso.                                                  | /usuarios              | POST            | Status Code 201; Mensagem "Cadastro realizado com sucesso"; Retorno de um `_id`.                                                                                           |            |
| CF1.2                   | Verificar a tentativa de criar usuário com email já cadastrado.                             | /usuarios              | POST            | Status Code 400; Mensagem "Este email já está sendo usado".                                                                                                               |            |
| CF2.1                   | Verificar a edição de usuário com sucesso.                                                   | /usuarios/{_id}        | PUT             | Status Code 200 ou 201; Mensagem "Registro alterado com sucesso" ou "Cadastro realizado com sucesso"; Retorno de um `_id`.                                              |            |
| CF2.2                   | Verificar a tentativa de editar usuário com email já cadastrado.                            | /usuarios/{_id}        | PUT             | Status Code 400; Mensagem "Este email já está sendo usado".                                                                                                               |            |
| CF3.1                   | Verificar a busca de usuário por ID com sucesso.                                             | /usuarios/{_id}        | GET             | Status Code 200; Resposta JSON com dados do usuário.                                                                                                                        |            |
| CF3.2                   | Verificar a busca de usuário por ID não encontrado.                                          | /usuarios/{_id}        | GET             | Status Code 400; Mensagem "Usuário não encontrado".                                                                                                                        |            |
| CF4.1                   | Verificar a listagem de usuários com parâmetros de consulta.                                | /usuarios              | GET             | Status Code 200; Resposta JSON com quantidade e lista de usuários.                                                                                                          |            |
| CF5.1                   | Verificar a criação de produto com sucesso.                                                  | /produtos              | POST            | Status Code 201; Mensagem "Cadastro realizado com sucesso"; Retorno de um `_id`.                                                                                           |            |
| CF5.2                   | Verificar a tentativa de criar produto com nome já cadastrado.                              | /produtos              | POST            | Status Code 400; Mensagem "Já existe produto com esse nome".                                                                                                                |            |
| CF5.3                   | Verificar a criação de produto sem token de acesso.                                          | /produtos              | POST            | Status Code 401; Mensagem "Token de acesso ausente, inválido, expirado ou usuário do token não existe mais".                                                               |            |
| CF5.4                   | Verificar a criação de produto com token de acesso não autorizado.                          | /produtos              | POST            | Status Code 403; Mensagem "Rota exclusiva para administradores".                                                                                                             |            |
| CF6.1                   | Verificar a listagem de produtos com parâmetros de consulta.                                | /produtos              | GET             | Status Code 200; Resposta JSON com quantidade e lista de produtos.                                                                                                          |            |
| CF7.1                   | Verificar a edição de produto com sucesso.                                                   | /produtos/{_id}        | PUT             | Status Code 200 ou 201; Mensagem "Registro alterado com sucesso" ou "Cadastro realizado com sucesso"; Retorno de um `_id`.                                              |            |
| CF7.2                   | Verificar a tentativa de editar produto com nome já cadastrado.                             | /produtos/{_id}        | PUT             | Status Code 400; Mensagem "Já existe produto com esse nome".                                                                                                                |            |
| CF8.1                   | Verificar a exclusão de produto com sucesso.                                                 | /produtos/{_id}        | DELETE          | Status Code 200; Mensagem "Registro excluído com sucesso".                                                                                                                   |            |
| CF8.2                   | Verificar a tentativa de excluir produto com ID não encontrado.                             | /produtos/{_id}        | DELETE          | Status Code 404; Mensagem "Produto não encontrado".                                                                                                                         |            |
| CF9.1                   | Verificar o login com sucesso.                                                                | /login                 | POST            | Status Code 200; Resposta com token de autorização no formato 'Bearer [token]'.                                                                                             |            |
| CF9.2                   | Verificar o login com credenciais inválidas.                                                 | /login                 | POST            | Status Code 401; Mensagem "Credenciais inválidas".                                                                                                                           |            |
| CF10.1                  | Verificar a conclusão de compra e exclusão de carrinho com sucesso.                          | /carrinhos/concluir-compra | DELETE        | Status Code 200; Mensagem "Registro excluído com sucesso | Não foi encontrado carrinho para esse usuário".                                                                  |            |
| CF10.2                  | Verificar a tentativa de concluir a compra sem token de acesso.                             | /carrinhos/concluir-compra | DELETE        | Status Code 401; Mensagem "Token de acesso ausente, inválido, expirado ou usuário do token não existe mais".                                                              |            |
| CF11.1                  | Verificar a execução de testes de integração com sucesso no k6.                              | /usuarios (POST)       | POST            | Verificar se os thresholds de métricas como `http_req_failed` não foram ultrapassados e a execução dos testes é concluída com sucesso.                                    |            |
| CF11.2                  | Verificar o tratamento de erros e falhas em testes de integração no k6.                     | /usuarios (POST)       | POST            | Analisar e corrigir erros relacionados a `http_req_failed` e garantir que os logs forneçam informações suficientes para depuração.                                          |            |


---

## Testes não funcionais:

| TESTE                             | ENDPOINT                | HTTP VERBO | REQUISITOS                                    | CHECKS                                    |
|-----------------------------------|-------------------------|------------|-----------------------------------------------|-------------------------------------------|
| **Smoke (Teste de fumaça) - CT12**    |                         |            |                                               |                                           |
| CT12.1                            | /movies/{id}            | GET        | Verificar operação básica com poucos usuários | `checkStatusCode`, `checkResponseTime`, `checkIDPresence` |
| CT12.2                            | /tickets/{id}           | GET        | Verificar operação básica com poucos usuários | `checkStatusCode`, `checkResponseTime`, `checkIDPresence` |
| CT12.3                            | Fluxo usuário comum     | GET, POST, PUT | GET/movies, POST/tickets, PUT/tickets, GET/tickets/{id} | `checkStatusCode`, `checkResponseTime` |
| CT12.4                            | Fluxo usuário administrador | POST, PUT, GET, DELETE | POST/movies, PUT/movies, GET/movies/{id}, DELETE/movies | `checkStatusCode`, `checkResponseTime` |
| **Spike (Teste de pico) - CT13**      |                         |            |                                               |                                           |
| CT13.1                            | /movies                 | GET        | Simular alta carga com ramp-up e ramp-down   | `checkStatusCode`, `checkResponseTime` |
| CT13.2                            | /tickets                | GET        | Simular alta carga com ramp-up e ramp-down   | `checkStatusCode`, `checkResponseTime` |
| CT13.3                            | Fluxo usuário comum     | GET, POST, PUT | GET/movies, POST/tickets, PUT/tickets, GET/tickets/{id} | `checkStatusCode`, `checkResponseTime` |
| CT13.4                            | Fluxo usuário administrador | POST, PUT, GET, DELETE | POST/movies, PUT/movies, GET/movies/{id}, DELETE/movies | `checkStatusCode`, `checkResponseTime` |
| **Load (Teste de carga) - CT14**       |                         |            |                                               |                                           |
| CT14.1                            | /movies/{id}            | PUT        | Testar com número esperado de usuários        | `checkStatusCode`, `checkResponseTime` |
| CT14.2                            | /tickets/{id}           | PUT        | Testar com número esperado de usuários        | `checkStatusCode`, `checkResponseTime` |
| CT14.3                            | Fluxo usuário comum     | GET, POST, PUT | GET/movies, POST/tickets, PUT/tickets, GET/tickets/{id} | `checkStatusCode`, `checkResponseTime` |
| CT14.4                            | Fluxo usuário administrador | POST, PUT, GET, DELETE | POST/movies, PUT/movies, GET/movies/{id}, DELETE/movies | `checkStatusCode`, `checkResponseTime` |
| **Stress (Teste de estresse) - CT15**  |                         |            |                                               |                                           |
| CT15.1                            | /movies/{id}            | DELETE     | Testar com 100% mais de usuários do que o teste de carga | `checkStatusCode`, `checkResponseTime` |
| CT15.2                            | /tickets/{id}           | DELETE     | Testar com 100% mais de usuários do que o teste de carga | `checkStatusCode`, `checkResponseTime` |
| CT15.3                            | Fluxo usuário comum     | GET, POST, PUT | GET/movies, POST/tickets, PUT/tickets, GET/tickets/{id} | `checkStatusCode`, `checkResponseTime` |
| CT15.4                            | Fluxo usuário administrador | POST, PUT, GET, DELETE | POST/movies, PUT/movies, GET/movies/{id}, DELETE/movies | `checkStatusCode`, `checkResponseTime` |
| **Soak (Teste de resistência) - CT16** |                         |            |                                               |                                           |
| CT16.1                            | /movies                 | POST       | Testar por um período prolongado              | `checkStatusCode`, `checkResponseTime` |
| CT16.2                            | /tickets                | POST       | Testar por um período prolongado              | `checkStatusCode`, `checkResponseTime` |
| CT16.3                            | Fluxo usuário comum     | GET, POST, PUT | GET/movies, POST/tickets, PUT/tickets, GET/tickets/{id} | `checkStatusCode`, `checkResponseTime` |
| CT16.4                            | Fluxo usuário administrador | POST, PUT, GET, DELETE | POST/movies, PUT/movies, GET/movies/{id}, DELETE/movies | `checkStatusCode`, `checkResponseTime` |

