# Matriz de Rastreabilidade

## Testes Funcionais

## Testes de API

| **ID do Caso de Teste** | **Descrição**                                                                                  | **Rota**               | **Método HTTP** | **Critérios de Aceitação**                                                                                                                                                    | **Status** |
|-------------------------|----------------------------------------------------------------------------------------------|------------------------|-----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------|
| CF1.1                   | Verificar a criação de usuário com sucesso.                                                  | /usuarios              | POST            | Status Code 201; Mensagem "Cadastro realizado com sucesso"; Retorno de um `_id`.                                                                                           |            |
| CF1.2                   | Verificar a tentativa de criar usuário com email já cadastrado.                             | /usuarios              | POST            | Status Code 400; Mensagem "Este email já está sendo usado".                                                                                                               |            |
| CF2.1                   | Verificar a edição de usuário com sucesso.                                                   | /usuarios/{_id}        | PUT             | Status Code 200 ou 201; Mensagem "Registro alterado com sucesso" ou "Cadastro realizado com sucesso"; Retorno de um `_id`.                                              |            |
| CF2.2                   | Verificar a tentativa de editar usuário com email já cadastrado.                            | /usuarios/{_id}        | PUT             | Status Code 400; Mensagem "Este email já está sendo usado".                                                                                                               |            |
| CF3.1                   | Verificar a busca de usuário por ID com sucesso.                                             | /usuarios/{_id}        | GET             | Status Code 200; Resposta JSON com dados do usuário.                                                                                                                        |            |
| CF3.2                   | Verificar a busca de usuário por ID não encontrado.                                          | /usuarios/{_id}        | GET             | Status Code 400; Mensagem "Usuário não encontrado".                                                                                                                        |            |
| CF4.1                   | Verificar a listagem de usuários com parâmetros de consulta.                                | /usuarios              | GET             | Status Code 200; Resposta JSON com quantidade e lista de usuários.                                                                                                          |            |
| CF5.1                   | Verificar a criação de produto com sucesso.                                                  | /produtos              | POST            | Status Code 201; Mensagem "Cadastro realizado com sucesso"; Retorno de um `_id`.                                                                                           |            |
| CF5.2                   | Verificar a tentativa de criar produto com nome já cadastrado.                              | /produtos              | POST            | Status Code 400; Mensagem "Já existe produto com esse nome".                                                                                                                |            |
| CF5.3                   | Verificar a criação de produto sem token de acesso.                                          | /produtos              | POST            | Status Code 401; Mensagem "Token de acesso ausente, inválido, expirado ou usuário do token não existe mais".                                                               |            |
| CF5.4                   | Verificar a criação de produto com token de acesso não autorizado.                          | /produtos              | POST            | Status Code 403; Mensagem "Rota exclusiva para administradores".                                                                                                             |            |
| CF6.1                   | Verificar a listagem de produtos com parâmetros de consulta.                                | /produtos              | GET             | Status Code 200; Resposta JSON com quantidade e lista de produtos.                                                                                                          |            |
| CF7.1                   | Verificar a edição de produto com sucesso.                                                   | /produtos/{_id}        | PUT             | Status Code 200 ou 201; Mensagem "Registro alterado com sucesso" ou "Cadastro realizado com sucesso"; Retorno de um `_id`.                                              |            |
| CF7.2                   | Verificar a tentativa de editar produto com nome já cadastrado.                             | /produtos/{_id}        | PUT             | Status Code 400; Mensagem "Já existe produto com esse nome".                                                                                                                |            |
| CF8.1                   | Verificar a exclusão de produto com sucesso.                                                 | /produtos/{_id}        | DELETE          | Status Code 200; Mensagem "Registro excluído com sucesso".                                                                                                                   |            |
| CF8.2                   | Verificar a tentativa de excluir produto com ID não encontrado.                             | /produtos/{_id}        | DELETE          | Status Code 404; Mensagem "Produto não encontrado".                                                                                                                         |            |
| CF9.1                   | Verificar o login com sucesso.                                                                | /login                 | POST            | Status Code 200; Resposta com token de autorização no formato 'Bearer [token]'.                                                                                             |            |
| CF9.2                   | Verificar o login com credenciais inválidas.                                                 | /login                 | POST            | Status Code 401; Mensagem "Credenciais inválidas".                                                                                                                           |            |
| CF10.1                  | Verificar a conclusão de compra e exclusão de carrinho com sucesso.                          | /carrinhos/concluir-compra | DELETE        | Status Code 200; Mensagem "Registro excluído com sucesso | Não foi encontrado carrinho para esse usuário".                                                                  |            |
| CF10.2                  | Verificar a tentativa de concluir a compra sem token de acesso.                             | /carrinhos/concluir-compra | DELETE        | Status Code 401; Mensagem "Token de acesso ausente, inválido, expirado ou usuário do token não existe mais".                                                              |            |
| CF11.1                  | Verificar a execução de testes de integração com sucesso no k6.                              | /usuarios (POST)       | POST            | Verificar se os thresholds de métricas como `http_req_failed` não foram ultrapassados e a execução dos testes é concluída com sucesso.                                    |            |
| CF11.2                  | Verificar o tratamento de erros e falhas em testes de integração no k6.                     | /usuarios (POST)       | POST            | Analisar e corrigir erros relacionados a `http_req_failed` e garantir que os logs forneçam informações suficientes para depuração.                                          |            |


---

## Testes não funcionais:



| **ID do Caso de Teste** | **ENDPOINT**  | **HTTP VERBO** | **THRESHOLD** | **REQUISITOS**                                | **CHECKS**                                | **Tipo de Teste** | **Descrição**                                   |
|-------------------------|---------------|----------------|---------------|-----------------------------------------------|-------------------------------------------|-------------------|-------------------------------------------------|
| CP1.1                   | /movies/{id}   | GET            | p(95) < 50     | Tempo médio de resposta ≤ 50ms               | `checkStatusCode`, `checkResponseTime`, `checkIDPresence` | Smoke             | Verificar se a API está operando com poucos usuários |
| CP1.2                   | /movies        | GET            | p(95) < 100    | Tempo médio de resposta ≤ 100ms              | `checkStatusCode`, `checkResponseTime`, `checkPagination` | Smoke             | Verificar se a API está operando com poucos usuários |
| CP1.3                   | /movies        | POST           | p(95) < 200    | Tempo médio de resposta ≤ 200ms              | `checkStatusCode`, `checkResponseTime`    | Smoke             | Verificar se a API está operando com poucos usuários |
| CP1.4                   | /movies/{id}   | PUT            | p(95) < 300    | Tempo médio de resposta ≤ 300ms              | `checkStatusCode`, `checkResponseTime`    | Smoke             | Verificar se a API está operando com poucos usuários |
| CP1.5                   | /movies/{id}   | DELETE         | p(95) < 400    | Tempo médio de resposta ≤ 400ms              | `checkStatusCode`, `checkResponseTime`    | Smoke             | Verificar se a API está operando com poucos usuários |
| CP2.1                   | /tickets       | GET            | p(95) < 1000   | Tempo médio de resposta ≤ 1000ms             | `checkStatusCode`, `checkResponseTime`    | Spike             | Simular pico de carga com muitos usuários      |
| CP2.2                   | /tickets       | POST           | p(95) < 300    | Tempo médio de resposta ≤ 300ms              | `checkStatusCode`, `checkResponseTime`    | Spike             | Simular pico de carga com muitos usuários      |
| CP2.3                   | /tickets/{id}  | GET            | p(95) < 100    | Tempo médio de resposta ≤ 100ms              | `checkStatusCode`, `checkResponseTime`, `checkIDPresence` | Spike             | Simular pico de carga com muitos usuários      |
| CP2.4                   | /tickets/{id}  | PUT            | p(95) < 300    | Tempo médio de resposta ≤ 300ms              | `checkStatusCode`, `checkResponseTime`, `checkIDPresence` | Spike             | Simular pico de carga com muitos usuários      |
| CP2.5                   | /tickets/{id}  | DELETE         | p(95) < 400    | Tempo médio de resposta ≤ 400ms              | `checkStatusCode`, `checkResponseTime`, `checkIDPresence` | Spike             | Simular pico de carga com muitos usuários      |
| CP3.1                   | /movies/{id}   | PUT            | p(95) < 300    | Tempo médio de resposta ≤ 300ms              | `checkStatusCode`, `checkResponseTime`    | Load              | Testar a API com carga normal de usuários      |
| CP3.2                   | /tickets       | GET            | p(95) < 1000   | Tempo médio de resposta ≤ 1000ms             | `checkStatusCode`, `checkResponseTime`    | Load              | Testar a API com carga normal de usuários      |
| CP3.3                   | /tickets       | POST           | p(95) < 300    | Tempo médio de resposta ≤ 300ms              | `checkStatusCode`, `checkResponseTime`    | Load              | Testar a API com carga normal de usuários      |
| CP4.1                   | /movies/{id}   | DELETE         | p(95) < 400    | Tempo médio de resposta ≤ 400ms              | `checkStatusCode`, `checkResponseTime`    | Stress            | Testar a API com carga 100% maior que o normal |
| CP4.2                   | /tickets       | GET            | p(95) < 1000   | Tempo médio de resposta ≤ 1000ms             | `checkStatusCode`, `checkResponseTime`    | Stress            | Testar a API com carga 100% maior que o normal |
| CP4.3                   | /tickets       | POST           | p(95) < 300    | Tempo médio de resposta ≤ 300ms              | `checkStatusCode`, `checkResponseTime`    | Stress            | Testar a API com carga 100% maior que o normal |
| CP5.1                   | /movies        | POST           | p(95) < 200    | Tempo médio de resposta ≤ 200ms              | `checkStatusCode`, `checkResponseTime`    | Soak              | Testar a API por um tempo prolongado            |
| CP5.2                   | /tickets       | GET            | p(95) < 1000   | Tempo médio de resposta ≤ 1000ms             | `checkStatusCode`, `checkResponseTime`    | Soak              | Testar a API por um tempo prolongado            |
| CP5.3                   | /tickets       | POST           | p(95) < 300    | Tempo médio de resposta ≤ 300ms              | `checkStatusCode`, `checkResponseTime`    | Soak              | Testar a API por um tempo prolongado            |


